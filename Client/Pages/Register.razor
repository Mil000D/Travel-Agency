@page "/register"
@inject HttpClient HttpClient
@inject NavigationManager NavigationManager


<MudElement>
    <MudText Align="Align.Center" Typo="Typo.h4" Class="mb-2">Register</MudText>
    <MudCard Elevation="20" Style="min-width: 400px;">
        <MudCardContent>
            <MudStack Row="true">
            <MudTextField Label="Name"
                            @bind-Value="UserDTO.Name" For="@(() => UserDTO.Name)"/>
            <MudTextField Label="Surname"
                          @bind-Value="UserDTO.Surname" For="@(() => UserDTO.Surname)" />
            </MudStack>
            <MudStack Row="true">
                <MudTextField Label="Username" @bind-Value="UserDTO.Login" For="@(() => UserDTO.Login)" />
                <MudTextField Label="Email" @bind-Value="UserDTO.Email" For="@(() => UserDTO.Email)" />
            </MudStack>
            <MudStack Row="true">
                <MudTextField Label="Password" @bind-Value="UserDTO.Password" For="@(() => UserDTO.Password)" InputType="InputType.Password" />
                <MudTextField Label="Confirm password" @bind-Value="UserDTO.ConfirmPassword" For="@(() => UserDTO.ConfirmPassword)" InputType="InputType.Password" />
            </MudStack>
            <MudStack Row="true">
                <MudTextField Label="Phone number" @bind-Date="UserDTO.PhoneNumber" For="@(() => UserDTO.PhoneNumber)"></MudTextField>
                <MudTextField Label="E-mail" @bind-Date="UserDTO.Email" For="@(() => UserDTO.Email)"></MudTextField>
            </MudStack>
            <MudDatePicker Label="Date of birth" @bind-Date="UserDTO.BirthDate" For="@(() => UserDTO.BirthDate)" />
            <MudText Color="Color.Error">@_errorMessage</MudText>
        </MudCardContent>
        <MudCardActions Class="justify-center">
            <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary">Register</MudButton>
        </MudCardActions>
    </MudCard>
    <MudCard Elevation="20" Style="min-width: 400px;" Class="mt-3">
        <MudCardContent Class="d-flex justify-center">
            <MudText Typo="Typo.h6">Already registered?</MudText>
        </MudCardContent>
        <MudCardActions Class="justify-center">
            <MudButton Variant="Variant.Filled" Color="Color.Primary" @onclick="@OnLoginClick">Log In</MudButton>
        </MudCardActions>
    </MudCard>
</MudElement>
@code {
    [Parameter]
    public RegisterUserDTO UserDTO { get; set; }
    private string _errorMessage;
    protected override void OnInitialized()
    {
        UserDTO = new RegisterUserDTO();
    }

    private async Task HandleValidSubmitAsync()
    {

    }

    private void OnLoginClick()
    {
        NavigationManager.NavigateTo("/login");
    }
}